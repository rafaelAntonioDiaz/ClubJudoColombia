# ===================================================
# 1. CONFIGURACIÓN DE BASE DE DATOS (H2 FILE-BASED)
# ===================================================

# Usamos 'file:./data/judo_db' para que H2 guarde la información en un archivo físico
# dentro de una carpeta llamada 'data'. Esto es VITAL para que los datos no se borren en Railway.
spring.datasource.url=jdbc:h2:mem:judodb;MODE=MySQL;DB_CLOSE_DELAY=-1;DATABASE_TO_LOWER=TRUE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
# Initialization Strategy (Tierra Quemada)
spring.sql.init.mode=always

# Habilitar la consola web de H2 (Para ver tus tablas en el navegador)
# Podrás acceder a ella entrando a: http://localhost:8080/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.flyway.enabled=false

# ===================================================
# 2. CONFIGURACIÓN DE JPA / HIBERNATE
# ===================================================

spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true
spring.jpa.hibernate.ddl-auto=update
# ===================================================
# 3. SERVICIO DE CORREO (MAILTRAP - PRUEBAS)
# ===================================================
spring.mail.host=sandbox.smtp.mailtrap.io
spring.mail.port=587
spring.mail.username=f169ad9121a9f4
spring.mail.password=6482da0d794573
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8
spring.mail.properties.mail.debug=false

# ===================================================
# 4. ALMACENAMIENTO EN LA NUBE (AWS S3 - FREE TIER)
# ===================================================

cloudflare.r2.access-key=${CLOUDFLARE_R2_ACCESS_KEY:dummy_access_key}
cloudflare.r2.secret-key=${CLOUDFLARE_R2_SECRET_KEY:dummy_secret_key}
cloudflare.r2.endpoint=${CLOUDFLARE_R2_ENDPOINT:https://dummy.r2.cloudflarestorage.com}
cloudflare.r2.bucket-name=${CLOUDFLARE_R2_BUCKET_NAME:judo-colombia-bucket}
cloudflare.r2.public-url=${CLOUDFLARE_R2_PUBLIC_URL:https://dummy.pub.r2.dev}

# Ampliar el límite de subida para los PDFs de los Judokas
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB